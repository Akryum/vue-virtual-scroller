var VueVirtualScroller=function(e,t){"use strict";t=t&&t.hasOwnProperty("default")?t.default:t;var n={itemsLimit:1e3};var i=void 0;function r(){r.init||(r.init=!0,i=-1!==function(){var e=window.navigator.userAgent,t=e.indexOf("MSIE ");if(t>0)return parseInt(e.substring(t+5,e.indexOf(".",t)),10);if(e.indexOf("Trident/")>0){var n=e.indexOf("rv:");return parseInt(e.substring(n+3,e.indexOf(".",n)),10)}var i=e.indexOf("Edge/");return i>0?parseInt(e.substring(i+5,e.indexOf(".",i)),10):-1}())}var s={render:function(){var e=this.$createElement;return(this._self._c||e)("div",{staticClass:"resize-observer",attrs:{tabindex:"-1"}})},staticRenderFns:[],_scopeId:"data-v-b329ee4c",name:"resize-observer",methods:{notify:function(){this.$emit("notify")},addResizeHandlers:function(){this._resizeObject.contentDocument.defaultView.addEventListener("resize",this.notify),this._w===this.$el.offsetWidth&&this._h===this.$el.offsetHeight||this.notify()},removeResizeHandlers:function(){this._resizeObject&&this._resizeObject.onload&&(!i&&this._resizeObject.contentDocument&&this._resizeObject.contentDocument.defaultView.removeEventListener("resize",this.notify),delete this._resizeObject.onload)}},mounted:function(){var e=this;r(),this.$nextTick(function(){e._w=e.$el.offsetWidth,e._h=e.$el.offsetHeight});var t=document.createElement("object");this._resizeObject=t,t.setAttribute("style","display: block; position: absolute; top: 0; left: 0; height: 100%; width: 100%; overflow: hidden; pointer-events: none; z-index: -1;"),t.setAttribute("aria-hidden","true"),t.setAttribute("tabindex",-1),t.onload=this.addResizeHandlers,t.type="text/html",i&&this.$el.appendChild(t),t.data="about:blank",i||this.$el.appendChild(t)},beforeDestroy:function(){this.removeResizeHandlers()}};var o={version:"0.4.4",install:function(e){e.component("resize-observer",s)}},l=null;"undefined"!=typeof window?l=window.Vue:"undefined"!=typeof global&&(l=global.Vue),l&&l.use(o);var a="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},c=function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")},d=function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}(),u=function(e){if(Array.isArray(e)){for(var t=0,n=Array(e.length);t<e.length;t++)n[t]=e[t];return n}return Array.from(e)};var h=function(){function e(t,n,i){c(this,e),this.el=t,this.observer=null,this.frozen=!1,this.createObserver(n,i)}return d(e,[{key:"createObserver",value:function(e,t){var n,i,r,s,o,l,a,c=this;(this.observer&&this.destroyObserver(),this.frozen)||(this.options="function"==typeof(n=e)?{callback:n}:n,this.callback=this.options.callback,this.callback&&this.options.throttle&&(this.callback=(i=this.callback,r=this.options.throttle,s=void 0,o=void 0,l=void 0,(a=function(e){for(var t=arguments.length,n=Array(t>1?t-1:0),a=1;a<t;a++)n[a-1]=arguments[a];l=n,s&&e===o||(o=e,clearTimeout(s),s=setTimeout(function(){i.apply(void 0,[e].concat(u(l))),s=0},r))})._clear=function(){clearTimeout(s)},a)),this.oldResult=void 0,this.observer=new IntersectionObserver(function(e){var t=e[0];if(c.callback){var n=t.isIntersecting&&t.intersectionRatio>=c.threshold;if(n===c.oldResult)return;c.oldResult=n,c.callback(n,t),n&&c.options.once&&(c.frozen=!0,c.destroyObserver())}},this.options.intersection),t.context.$nextTick(function(){c.observer.observe(c.el)}))}},{key:"destroyObserver",value:function(){this.observer&&(this.observer.disconnect(),this.observer=null),this.callback&&this.callback._clear&&(this.callback._clear(),this.callback=null)}},{key:"threshold",get:function(){return this.options.intersection&&this.options.intersection.threshold||0}}]),e}();function f(e,t,n){var i=t.value;if("undefined"==typeof IntersectionObserver)console.warn("[vue-observe-visibility] IntersectionObserver API is not available in your browser. Please install this polyfill: https://github.com/w3c/IntersectionObserver/tree/master/polyfill");else{var r=new h(e,i,n);e._vue_visibilityState=r}}var v={bind:f,update:function(e,t,n){var i=t.value;if(!function e(t,n){if(t===n)return!0;if("object"===(void 0===t?"undefined":a(t))){for(var i in t)if(!e(t[i],n[i]))return!1;return!0}return!1}(i,t.oldValue)){var r=e._vue_visibilityState;r?r.createObserver(i,n):f(e,{value:i},n)}},unbind:function(e){var t=e._vue_visibilityState;t&&(t.destroyObserver(),delete e._vue_visibilityState)}};var p={version:"0.4.3",install:function(e){e.directive("observe-visibility",v)}},m=null;"undefined"!=typeof window?m=window.Vue:"undefined"!=typeof global&&(m=global.Vue),m&&m.use(p);var y="undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:{};var g,w=(function(e){var t,n;t=y,n=function(){var e=/(auto|scroll)/,t=function(e,n){return null===e.parentNode?n:t(e.parentNode,n.concat([e]))},n=function(e,t){return getComputedStyle(e,null).getPropertyValue(t)},i=function(t){return e.test(function(e){return n(e,"overflow")+n(e,"overflow-y")+n(e,"overflow-x")}(t))};return function(e){if(e instanceof HTMLElement||e instanceof SVGElement){for(var n=t(e.parentNode,[]),r=0;r<n.length;r+=1)if(i(n[r]))return n[r];return document.scrollingElement||document.documentElement}}},e.exports?e.exports=n():t.Scrollparent=n()}(g={exports:{}},g.exports),g.exports),b=!1;if("undefined"!=typeof window){b=!1;try{var _=Object.defineProperty({},"passive",{get:function(){b=!0}});window.addEventListener("test",null,_)}catch(e){}}var x=0,$={name:"RecycleScroller",mixins:[{components:{ResizeObserver:s},directives:{ObserveVisibility:v},props:{items:{type:Array,required:!0},itemHeight:{type:Number,default:null},minItemHeight:{type:[Number,String],default:null},heightField:{type:String,default:"height"},typeField:{type:String,default:"type"},keyField:{type:String,default:"id"},buffer:{type:Number,default:200},pageMode:{type:Boolean,default:!1},prerender:{type:Number,default:0},emitUpdate:{type:Boolean,default:!1}},computed:{heights:function(){if(null===this.itemHeight){for(var e={"-1":{accumulator:0}},t=this.items,n=this.heightField,i=this.minItemHeight,r=0,s=void 0,o=0,l=t.length;o<l;o++)r+=s=t[o][n]||i,e[o]={accumulator:r,height:s};return e}}},beforeDestroy:function(){this.removeListeners()},methods:{getListenerTarget:function(){var e=w(this.$el);return e!==window.document.documentElement&&e!==window.document.body||(e=window),e},getScroll:function(){var e=this.$el,t=void 0;if(this.pageMode){var n=e.getBoundingClientRect(),i=-n.top,r=window.innerHeight;i<0&&(r+=i,i=0),i+r>n.height&&(r=n.height-i),t={top:i,bottom:i+r}}else t={top:e.scrollTop,bottom:e.scrollTop+e.clientHeight};return t},applyPageMode:function(){this.pageMode?this.addListeners():this.removeListeners()},addListeners:function(){this.listenerTarget=this.getListenerTarget(),this.listenerTarget.addEventListener("scroll",this.handleScroll,!!b&&{passive:!0}),this.listenerTarget.addEventListener("resize",this.handleResize)},removeListeners:function(){this.listenerTarget&&(this.listenerTarget.removeEventListener("scroll",this.handleScroll),this.listenerTarget.removeEventListener("resize",this.handleResize),this.listenerTarget=null)},scrollToItem:function(e){var t=void 0;t=null===this.itemHeight?e>0?this.heights[e-1].accumulator:0:e*this.itemHeight,this.scrollToPosition(t)},scrollToPosition:function(e){this.$el.scrollTop=e},itemsLimitError:function(){var e=this;throw setTimeout(function(){console.log("It seems the scroller element isn't scrolling, so it tries to render all the items at once.","Scroller:",e.$el),console.log("Make sure the scroller has a fixed height and 'overflow-y' set to 'auto' so it can scroll correctly and only render the items visible in the scroll viewport.")}),new Error("Rendered items limit reached")}}}],data:function(){return{pool:[],totalHeight:0,ready:!1,hoverKey:null}},watch:{items:function(){this.updateVisibleItems(!0)},pageMode:function(){this.applyPageMode(),this.updateVisibleItems(!1)},heights:{handler:function(){this.updateVisibleItems(!1)},deep:!0}},created:function(){this.$_startIndex=0,this.$_endIndex=0,this.$_views=new Map,this.$_unusedViews=new Map,this.$_scrollDirty=!1,this.$isServer&&this.updateVisibleItems(!1)},mounted:function(){var e=this;this.applyPageMode(),this.$nextTick(function(){e.updateVisibleItems(!0),e.ready=!0})},methods:{addView:function(e,t,n,i,r){var s={item:n,top:0},o={id:x++,index:t,used:!0,key:i,type:r};return Object.defineProperty(s,"nr",{configurable:!1,value:o}),e.push(s),s},unuseView:function(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1],n=this.$_unusedViews,i=e.nr.type,r=n.get(i);r||(r=[],n.set(i,r)),r.push(e),t||(e.nr.used=!1,e.top=-9999,this.$_views.delete(e.nr.key))},handleResize:function(){this.$emit("resize"),this.ready&&this.updateVisibleItems(!1)},handleScroll:function(e){var t=this;this.$_scrollDirty||(this.$_scrollDirty=!0,requestAnimationFrame(function(){t.$_scrollDirty=!1,t.updateVisibleItems(!1).continuous||(clearTimeout(t.$_refreshTimout),t.$_refreshTimout=setTimeout(t.handleScroll,100))}))},handleVisibilityChange:function(e,t){var n=this;this.ready&&(e||0!==t.boundingClientRect.width||0!==t.boundingClientRect.height?(this.$emit("visible"),requestAnimationFrame(function(){n.updateVisibleItems(!1)})):this.$emit("hidden"))},updateVisibleItems:function(e){var t=this.itemHeight,i=this.typeField,r=this.keyField,s=this.items,o=s.length,l=this.heights,a=this.$_views,c=this.$_unusedViews,d=this.pool,u=void 0,h=void 0,f=void 0;if(o)if(this.$isServer)u=0,h=this.prerender,f=null;else{var v=this.getScroll(),p=this.buffer;if(v.top-=p,v.bottom+=p,null===t){var m=0,y=o-1,g=~~(o/2),w=void 0;do{w=g,l[g].accumulator<v.top?m=g:g<o-1&&l[g+1].accumulator>v.top&&(y=g),g=~~((m+y)/2)}while(g!==w);for(g<0&&(g=0),u=g,f=l[o-1].accumulator,h=g;h<o&&l[h].accumulator<v.bottom;h++);-1===h?h=s.length-1:++h>o&&(h=o)}else u=~~(v.top/t),h=Math.ceil(v.bottom/t),u<0&&(u=0),h>o&&(h=o),f=o*t}else u=h=f=0;h-u>n.itemsLimit&&this.itemsLimitError(),this.totalHeight=f;var b=void 0,_=u<=this.$_endIndex&&h>=this.$_startIndex,x=void 0;if(this.$_continuous!==_){if(_){a.clear(),c.clear();for(var $=0,I=d.length;$<I;$++)b=d[$],this.unuseView(b)}this.$_continuous=_}else if(_)for(var S=0,A=d.length;S<A;S++)(b=d[S]).nr.used&&(e&&(b.nr.index=s.findIndex(function(e){return r?e[r]===b.item[r]:e===b.item})),(-1===b.nr.index||b.nr.index<u||b.nr.index>=h)&&this.unuseView(b));_||(x=new Map);for(var V=void 0,z=void 0,k=void 0,D=void 0,R=u;R<h;R++){V=s[R];var C=r?V[r]:V;b=a.get(C),t||l[R].height?(b?b.nr.used=!0:(z=V[i],_?(k=c.get(z))&&k.length?((b=k.pop()).item=V,b.nr.used=!0,b.nr.index=R,b.nr.key=C,b.nr.type=z):b=this.addView(d,R,V,C,z):(k=c.get(z),D=x.get(z)||0,k&&D<k.length?((b=k[D]).item=V,b.nr.used=!0,b.nr.index=R,b.nr.key=C,b.nr.type=z,x.set(z,D+1)):(b=this.addView(d,R,V,C,z),this.unuseView(b,!0)),D++),a.set(C,b)),b.top=null===t?l[R-1].accumulator:R*t):b&&this.unuseView(b)}return this.$_startIndex=u,this.$_endIndex=h,this.emitUpdate&&this.$emit("update",u,h),{continuous:_}}}},I=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{directives:[{name:"observe-visibility",rawName:"v-observe-visibility",value:e.handleVisibilityChange,expression:"handleVisibilityChange"}],staticClass:"vue-recycle-scroller",class:{ready:e.ready,"page-mode":e.pageMode},on:{"&scroll":function(t){return e.handleScroll(t)}}},[e._t("before-container"),e._v(" "),n("div",{ref:"wrapper",staticClass:"vue-recycle-scroller__item-wrapper",style:{height:e.totalHeight+"px"}},e._l(e.pool,function(t){return n("div",{key:t.nr.id,staticClass:"vue-recycle-scroller__item-view",class:{hover:e.hoverKey===t.nr.key},style:e.ready?{transform:"translateY("+t.top+"px)"}:null,on:{mouseenter:function(n){e.hoverKey=t.nr.key},mouseleave:function(t){e.hoverKey=null}}},[e._t("default",null,{item:t.item,index:t.nr.index,active:t.nr.used})],2)})),e._v(" "),e._t("after-container"),e._v(" "),n("resize-observer",{on:{notify:e.handleResize}})],2)};I._withStripped=!0;var S=function(e,t,n,i,r,s,o,l){var a=("function"==typeof n?n.options:n)||{};a.__file="/Users/fritzc/code/vue-virtual-scroller/src/components/RecycleScroller.vue",a.render||(a.render=e.render,a.staticRenderFns=e.staticRenderFns,a._compiled=!0,r&&(a.functional=!0)),a._scopeId=i;var c=void 0;if(t&&(c=function(e){t.call(this,o(e))}),void 0!==c)if(a.functional){var d=a.render;a.render=function(e,t){return c.call(t),d(e,t)}}else{var u=a.beforeCreate;a.beforeCreate=u?[].concat(u,c):[c]}return a}({render:I,staticRenderFns:[]},function(e){e&&e("data-v-253c7ec5_0",{source:"\n.vue-recycle-scroller:not(.page-mode) {\n  overflow-y: auto;\n}\n.vue-recycle-scroller__item-wrapper {\n  box-sizing: border-box;\n  width: 100%;\n  overflow: hidden;\n  position: relative;\n}\n.vue-recycle-scroller.ready .vue-recycle-scroller__item-view {\n  width: 100%;\n  position: absolute;\n  top: 0;\n  left: 0;\n  will-change: transform;\n}\n",map:{version:3,sources:["/Users/fritzc/code/vue-virtual-scroller/src/components/RecycleScroller.vue"],names:[],mappings:";AAoXA;EACA,iBAAA;CACA;AAEA;EACA,uBAAA;EACA,YAAA;EACA,iBAAA;EACA,mBAAA;CACA;AAEA;EACA,YAAA;EACA,mBAAA;EACA,OAAA;EACA,QAAA;EACA,uBAAA;CACA",file:"RecycleScroller.vue",sourcesContent:['<template>\n  <div\n    v-observe-visibility="handleVisibilityChange"\n    class="vue-recycle-scroller"\n    :class="{\n      ready,\n      \'page-mode\': pageMode,\n    }"\n    @scroll.passive="handleScroll"\n  >\n    <slot\n      name="before-container"\n    />\n\n    <div\n      ref="wrapper"\n      :style="{ height: totalHeight + \'px\' }"\n      class="vue-recycle-scroller__item-wrapper"\n    >\n      <div\n        v-for="view of pool"\n        :key="view.nr.id"\n        :style="ready ? { transform: \'translateY(\' + view.top + \'px)\' } : null"\n        class="vue-recycle-scroller__item-view"\n        :class="{ hover: hoverKey === view.nr.key }"\n        @mouseenter="hoverKey = view.nr.key"\n        @mouseleave="hoverKey = null"\n      >\n        <slot\n          :item="view.item"\n          :index="view.nr.index"\n          :active="view.nr.used"\n        />\n      </div>\n    </div>\n\n    <slot\n      name="after-container"\n    />\n\n    <resize-observer @notify="handleResize" />\n  </div>\n</template>\n\n<script>\nimport Scroller from \'../mixins/Scroller\'\nimport config from \'../config\'\n\nlet uid = 0\n\nexport default {\n  name: \'RecycleScroller\',\n\n  mixins: [\n    Scroller,\n  ],\n\n  data () {\n    return {\n      pool: [],\n      totalHeight: 0,\n      ready: false,\n      hoverKey: null,\n    }\n  },\n\n  watch: {\n    items () {\n      this.updateVisibleItems(true)\n    },\n\n    pageMode () {\n      this.applyPageMode()\n      this.updateVisibleItems(false)\n    },\n\n    heights: {\n      handler () {\n        this.updateVisibleItems(false)\n      },\n      deep: true,\n    },\n  },\n\n  created () {\n    this.$_startIndex = 0\n    this.$_endIndex = 0\n    this.$_views = new Map()\n    this.$_unusedViews = new Map()\n    this.$_scrollDirty = false\n\n    if (this.$isServer) {\n      this.updateVisibleItems(false)\n    }\n  },\n\n  mounted () {\n    this.applyPageMode()\n    this.$nextTick(() => {\n      this.updateVisibleItems(true)\n      this.ready = true\n    })\n  },\n\n  methods: {\n    addView (pool, index, item, key, type) {\n      const view = {\n        item,\n        top: 0,\n      }\n      const nonReactive = {\n        id: uid++,\n        index,\n        used: true,\n        key,\n        type,\n      }\n      Object.defineProperty(view, \'nr\', {\n        configurable: false,\n        value: nonReactive,\n      })\n      pool.push(view)\n      return view\n    },\n\n    unuseView (view, fake = false) {\n      const unusedViews = this.$_unusedViews\n      const type = view.nr.type\n      let unusedPool = unusedViews.get(type)\n      if (!unusedPool) {\n        unusedPool = []\n        unusedViews.set(type, unusedPool)\n      }\n      unusedPool.push(view)\n      if (!fake) {\n        view.nr.used = false\n        view.top = -9999\n        this.$_views.delete(view.nr.key)\n      }\n    },\n\n    handleResize () {\n      this.$emit(\'resize\')\n      if (this.ready) this.updateVisibleItems(false)\n    },\n\n    handleScroll (event) {\n      if (!this.$_scrollDirty) {\n        this.$_scrollDirty = true\n        requestAnimationFrame(() => {\n          this.$_scrollDirty = false\n          const { continuous } = this.updateVisibleItems(false)\n\n          // It seems sometimes chrome doesn\'t fire scroll event :/\n          // When non continous scrolling is ending, we force a refresh\n          if (!continuous) {\n            clearTimeout(this.$_refreshTimout)\n            this.$_refreshTimout = setTimeout(this.handleScroll, 100)\n          }\n        })\n      }\n    },\n\n    handleVisibilityChange (isVisible, entry) {\n      if (this.ready) {\n        if (isVisible || entry.boundingClientRect.width !== 0 || entry.boundingClientRect.height !== 0) {\n          this.$emit(\'visible\')\n          requestAnimationFrame(() => {\n            this.updateVisibleItems(false)\n          })\n        } else {\n          this.$emit(\'hidden\')\n        }\n      }\n    },\n\n    updateVisibleItems (checkItem) {\n      const itemHeight = this.itemHeight\n      const typeField = this.typeField\n      const keyField = this.keyField\n      const items = this.items\n      const count = items.length\n      const heights = this.heights\n      const views = this.$_views\n      let unusedViews = this.$_unusedViews\n      const pool = this.pool\n      let startIndex, endIndex\n      let totalHeight\n\n      if (!count) {\n        startIndex = endIndex = totalHeight = 0\n      } else if (this.$isServer) {\n        startIndex = 0\n        endIndex = this.prerender\n        totalHeight = null\n      } else {\n        const scroll = this.getScroll()\n        const buffer = this.buffer\n        scroll.top -= buffer\n        scroll.bottom += buffer\n\n        // Variable height mode\n        if (itemHeight === null) {\n          let h\n          let a = 0\n          let b = count - 1\n          let i = ~~(count / 2)\n          let oldI\n\n          // Searching for startIndex\n          do {\n            oldI = i\n            h = heights[i].accumulator\n            if (h < scroll.top) {\n              a = i\n            } else if (i < count - 1 && heights[i + 1].accumulator > scroll.top) {\n              b = i\n            }\n            i = ~~((a + b) / 2)\n          } while (i !== oldI)\n          i < 0 && (i = 0)\n          startIndex = i\n\n          // For container style\n          totalHeight = heights[count - 1].accumulator\n\n          // Searching for endIndex\n          for (endIndex = i; endIndex < count && heights[endIndex].accumulator < scroll.bottom; endIndex++);\n          if (endIndex === -1) {\n            endIndex = items.length - 1\n          } else {\n            endIndex++\n            // Bounds\n            endIndex > count && (endIndex = count)\n          }\n        } else {\n          // Fixed height mode\n          startIndex = ~~(scroll.top / itemHeight)\n          endIndex = Math.ceil(scroll.bottom / itemHeight)\n\n          // Bounds\n          startIndex < 0 && (startIndex = 0)\n          endIndex > count && (endIndex = count)\n\n          totalHeight = count * itemHeight\n        }\n      }\n\n      if (endIndex - startIndex > config.itemsLimit) {\n        this.itemsLimitError()\n      }\n\n      this.totalHeight = totalHeight\n\n      let view\n\n      const continuous = startIndex <= this.$_endIndex && endIndex >= this.$_startIndex\n      let unusedIndex\n\n      if (this.$_continuous !== continuous) {\n        if (continuous) {\n          views.clear()\n          unusedViews.clear()\n          for (let i = 0, l = pool.length; i < l; i++) {\n            view = pool[i]\n            this.unuseView(view)\n          }\n        }\n        this.$_continuous = continuous\n      } else if (continuous) {\n        for (let i = 0, l = pool.length; i < l; i++) {\n          view = pool[i]\n          if (view.nr.used) {\n            // Update view item index\n            if (checkItem) {\n              view.nr.index = items.findIndex(\n                item => keyField ? item[keyField] === view.item[keyField] : item === view.item\n              )\n            }\n\n            // Check if index is still in visible range\n            if (\n              view.nr.index === -1 ||\n              view.nr.index < startIndex ||\n              view.nr.index >= endIndex\n            ) {\n              this.unuseView(view)\n            }\n          }\n        }\n      }\n\n      if (!continuous) {\n        unusedIndex = new Map()\n      }\n\n      let item, type, unusedPool\n      let v\n      for (let i = startIndex; i < endIndex; i++) {\n        item = items[i]\n        const key = keyField ? item[keyField] : item\n        view = views.get(key)\n\n        if (!itemHeight && !heights[i].height) {\n          if (view) this.unuseView(view)\n          continue\n        }\n\n        // No view assigned to item\n        if (!view) {\n          type = item[typeField]\n\n          if (continuous) {\n            unusedPool = unusedViews.get(type)\n            // Reuse existing view\n            if (unusedPool && unusedPool.length) {\n              view = unusedPool.pop()\n              view.item = item\n              view.nr.used = true\n              view.nr.index = i\n              view.nr.key = key\n              view.nr.type = type\n            } else {\n              view = this.addView(pool, i, item, key, type)\n            }\n          } else {\n            unusedPool = unusedViews.get(type)\n            v = unusedIndex.get(type) || 0\n            // Use existing view\n            // We don\'t care if they are already used\n            // because we are not in continous scrolling\n            if (unusedPool && v < unusedPool.length) {\n              view = unusedPool[v]\n              view.item = item\n              view.nr.used = true\n              view.nr.index = i\n              view.nr.key = key\n              view.nr.type = type\n              unusedIndex.set(type, v + 1)\n            } else {\n              view = this.addView(pool, i, item, key, type)\n              this.unuseView(view, true)\n            }\n            v++\n          }\n          views.set(key, view)\n        } else {\n          view.nr.used = true\n        }\n\n        // Update position\n        if (itemHeight === null) {\n          view.top = heights[i - 1].accumulator\n        } else {\n          view.top = i * itemHeight\n        }\n      }\n\n      this.$_startIndex = startIndex\n      this.$_endIndex = endIndex\n\n      if (this.emitUpdate) this.$emit(\'update\', startIndex, endIndex)\n\n      return {\n        continuous,\n      }\n    },\n  },\n}\n<\/script>\n\n<style>\n.vue-recycle-scroller:not(.page-mode) {\n  overflow-y: auto;\n}\n\n.vue-recycle-scroller__item-wrapper {\n  box-sizing: border-box;\n  width: 100%;\n  overflow: hidden;\n  position: relative;\n}\n\n.vue-recycle-scroller.ready .vue-recycle-scroller__item-view {\n  width: 100%;\n  position: absolute;\n  top: 0;\n  left: 0;\n  will-change: transform;\n}\n</style>\n']},media:void 0})},$,void 0,!1,0,function e(){var t=document.head||document.getElementsByTagName("head")[0],n=e.styles||(e.styles={}),i="undefined"!=typeof navigator&&/msie [6-9]\\b/.test(navigator.userAgent.toLowerCase());return function(e,r){if(!document.querySelector('style[data-vue-ssr-id~="'+e+'"]')){var s=i?r.media||"default":e,o=n[s]||(n[s]={ids:[],parts:[],element:void 0});if(!o.ids.includes(e)){var l=r.source,a=o.ids.length;if(o.ids.push(e),i&&(o.element=o.element||document.querySelector("style[data-group="+s+"]")),!o.element){var c=o.element=document.createElement("style");c.type="text/css",r.media&&c.setAttribute("media",r.media),i&&(c.setAttribute("data-group",s),c.setAttribute("data-next-index","0")),t.appendChild(c)}if(i&&(a=parseInt(o.element.getAttribute("data-next-index")),o.element.setAttribute("data-next-index",a+1)),o.element.styleSheet)o.parts.push(l),o.element.styleSheet.cssText=o.parts.filter(Boolean).join("\n");else{var d=document.createTextNode(l),u=o.element.childNodes;u[a]&&o.element.removeChild(u[a]),u.length?o.element.insertBefore(d,u[a]):o.element.appendChild(d)}}}}}),A={name:"DynamicScroller",components:{RecycleScroller:S},inheritAttrs:!1,provide:function(){return{vscrollData:this.vscrollData,vscrollBus:this}},props:{items:{type:Array,required:!0},minItemHeight:{type:[Number,String],required:!0},keyField:{type:String,default:"id"}},data:function(){return{vscrollData:{active:!0,heights:{},keyField:this.keyField}}},computed:{itemsWithHeight:function(){for(var e=[],t=this.items,n=this.keyField,i=this.vscrollData.heights,r=0;r<t.length;r++){var s=t[r],o=s[n];e.push({item:s,id:o,height:i[o]||0})}return e},listeners:function(){var e={};for(var t in this.$listeners)"resize"!==t&&"visible"!==t&&(e[t]=this.$listeners[t]);return e}},watch:{items:"forceUpdate"},created:function(){this.$_updates=[]},mounted:function(){var e=this.$refs.scroller,t=this.getSize(e);this._scrollerWidth=t.width},activated:function(){this.vscrollData.active=!0},deactivated:function(){this.vscrollData.active=!1},methods:{onScrollerResize:function(){this.$refs.scroller&&this.forceUpdate(),this.$emit("resize")},onScrollerVisible:function(){this.$emit("vscroll:update",{force:!1}),this.$emit("visible")},forceUpdate:function(){this.vscrollData.heights={},this.$emit("vscroll:update",{force:!0})},getSize:function(e){return e.$el.getBoundingClientRect()},scrollToItem:function(e){var t=this.$refs.scroller;t&&t.scrollToItem(e)}}},V=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("RecycleScroller",e._g(e._b({ref:"scroller",attrs:{items:e.itemsWithHeight,"min-item-height":e.minItemHeight},on:{resize:e.onScrollerResize,visible:e.onScrollerVisible},scopedSlots:e._u([{key:"default",fn:function(t){var n=t.item,i=t.index,r=t.active;return[e._t("default",null,null,{item:n.item,index:i,active:r,itemWithHeight:n})]}}])},"RecycleScroller",e.$attrs,!1),e.listeners),[n("template",{slot:"before-container"},[e._t("before-container")],2),e._v(" "),n("template",{slot:"after-container"},[e._t("after-container")],2)],2)};V._withStripped=!0;var z=function(e,t,n,i,r,s,o,l){var a=("function"==typeof n?n.options:n)||{};return a.__file="/Users/fritzc/code/vue-virtual-scroller/src/components/DynamicScroller.vue",a.render||(a.render=e.render,a.staticRenderFns=e.staticRenderFns,a._compiled=!0,r&&(a.functional=!0)),a._scopeId=i,a}({render:V,staticRenderFns:[]},0,A,void 0,!1);var k=function(e,t,n,i,r,s,o,l){var a=("function"==typeof n?n.options:n)||{};return a.__file="/Users/fritzc/code/vue-virtual-scroller/src/components/DynamicScrollerItem.vue",a.render||(a.render=e.render,a.staticRenderFns=e.staticRenderFns,a._compiled=!0,r&&(a.functional=!0)),a._scopeId=i,a}({},0,{name:"DynamicScrollerItem",inject:["vscrollData","vscrollBus"],props:{item:{type:Object,required:!0},watchData:{type:Boolean,default:!1},active:{type:Boolean,required:!0},sizeDependencies:{type:[Array,Object],default:null},emitResize:{type:Boolean,default:!1},tag:{type:String,default:"div"}},computed:{id:function(){return this.item[this.vscrollData.keyField]},height:function(){return this.vscrollData.heights[this.id]||0}},watch:{watchData:"updateWatchData",id:function(){this.height||this.onDataUpdate()},active:function(e){e&&this.$_pendingVScrollUpdate&&this.updateSize()}},created:function(){var e=this;if(!this.$isServer){this.$_forceNextVScrollUpdate=!1,this.updateWatchData();var t=function(t){e.$watch(function(){return e.sizeDependencies[t]},e.onDataUpdate)};for(var n in this.sizeDependencies)t(n);this.vscrollBus.$on("vscroll:update",this.onVscrollUpdate),this.vscrollBus.$on("vscroll:update-size",this.onVscrollUpdateSize)}},mounted:function(){this.vscrollData.active&&this.updateSize()},beforeDestroy:function(){this.vscrollBus.$off("vscroll:update",this.onVscrollUpdate),this.vscrollBus.$off("vscroll:update-size",this.onVscrollUpdateSize)},methods:{updateSize:function(){this.active&&this.vscrollData.active?this.$_pendingSizeUpdate||(this.$_pendingSizeUpdate=!0,this.$_forceNextVScrollUpdate=!1,this.$_pendingVScrollUpdate=!1,this.active&&this.vscrollData.active&&this.computeSize(this.id)):this.$_forceNextVScrollUpdate=!0},getSize:function(){return this.$el.getBoundingClientRect()},updateWatchData:function(){var e=this;this.watchData?this.$_watchData=this.$watch("data",function(){e.onDataUpdate()},{deep:!0}):this.$_watchData&&(this.$_watchData(),this.$_watchData=null)},onVscrollUpdate:function(e){var t=e.force;!this.active&&t&&(this.$_pendingVScrollUpdate=!0),(this.$_forceNextVScrollUpdate||t||!this.height)&&this.updateSize()},onDataUpdate:function(){this.updateSize()},computeSize:function(e){var t=this;this.$nextTick(function(){if(t.id===e){var n=t.getSize();n.height&&t.height!==n.height&&(t.$set(t.vscrollData.heights,t.id,n.height),t.emitResize&&t.$emit("resize",t.id))}t.$_pendingSizeUpdate=!1})}},render:function(e){return e(this.tag,this.$slots.default)}},void 0,void 0);var D={version:"1.0.0-beta.1",install:function(e,t){var i=Object.assign({},{installComponents:!0,componentsPrefix:""},t);for(var r in i)void 0!==i[r]&&(n[r]=i[r]);i.installComponents&&function(e,t){e.component(t+"recycle-scroller",S),e.component(t+"RecycleScroller",S),e.component(t+"dynamic-scroller",z),e.component(t+"DynamicScroller",z),e.component(t+"dynamic-scroller-item",k),e.component(t+"DynamicScrollerItem",k)}(e,i.componentsPrefix)}},R=null;return"undefined"!=typeof window?R=window.Vue:"undefined"!=typeof global&&(R=global.Vue),R&&R.use(D),e.RecycleScroller=S,e.DynamicScroller=z,e.DynamicScrollerItem=k,e.default=D,e.IdState=function(){var e=(arguments.length>0&&void 0!==arguments[0]?arguments[0]:{}).idProp,n=void 0===e?function(e){return e.item.id}:e,i={},r=new t({data:function(){return{store:i}}});return{data:function(){return{idState:null}},created:function(){var e=this;this.$_id=null,this.$_getId="function"==typeof n?function(){return n.call(e,e)}:function(){return e[n]},this.$watch(this.$_getId,{handler:function(e){var t=this;this.$nextTick(function(){t.$_id=e})},immediate:!0}),this.$_updateIdState()},beforeUpdate:function(){this.$_updateIdState()},methods:{$_idStateInit:function(e){var t=this.$options.idState;if("function"==typeof t){var n=t.call(this,this);return r.$set(i,e,n),this.$_id=e,n}throw new Error("[mixin IdState] Missing `idState` function on component definition.")},$_updateIdState:function(){var e=this.$_getId();null==e&&console.warn("No id found for IdState with idProp: '"+n+"'."),e!==this.$_id&&(i[e]||this.$_idStateInit(e),this.idState=i[e])}}}},e}({},Vue);
